module.exports=function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.w={},r(r.s=24)}([function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"development"==e.app.env},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.types=t.JSON_API_MEDIA_TYPES_DEV=t.JSON_API_MEDIA_TYPES=void 0;var a,n=r(2),u=(a=n)&&a.__esModule?a:{default:a};var o=t.JSON_API_MEDIA_TYPES=["application/vnd.api+json"],s=t.JSON_API_MEDIA_TYPES_DEV=["application/json"];t.types=function(e){return(0,u.default)(e)?[].concat(o,s):[].concat(o)},t.stringify=function(e){return e.filter(function(e){return!!e}).join(",")}},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=require("http-errors")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(r(4)),n=f(r(1)),u=f(r(0)),o=f(r(21)),s=f(r(20)),i=f(r(19)),c=f(r(18)),d=r(17),l=f(r(13));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,s.default)(this,e),this.options={},"body"in t){if("object"!=(0,o.default)(t.body))throw new Error("'options.body' should be a JSON object");this.body=t.body}else this.body={};if("validate"in t){if("boolean"!=typeof t.validate)throw new Error("'options.validate' should be 'true' or 'false'");this.options.validate=t.validate}else this.options.validate=!1}return(0,i.default)(e,[{key:"validate",value:function(){var t=(0,u.default)(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validate(this.body);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"patch",value:function(){var t=(0,u.default)(n.default.mark(function t(r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.patch(this.body,r,this.options);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,u.default)(n.default.mark(function t(r,a){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.add(this.body,r,a,this.options);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()}],[{key:"validate",value:function(){var e=(0,u.default)(n.default.mark(function e(){var t,r,a=arguments;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/",r=a.length<=0?void 0:a[0],a.length>1&&(t=a.length<=0?void 0:a[0],r=a.length<=1?void 0:a[1]),e.prev=2,e.next=5,(0,d.validate)(t,r);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),e.t0.errors.map(l.default);case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var t=(0,u.default)(n.default.mark(function t(r,u){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=void 0,t.prev=1,o=c.default.apply(r,u,(0,a.default)({},s,{reversible:!0})),t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(1),{message:"JSONPatchError: cannot apply patch",meta:{doc:c.default.revert(r,o.revert).doc,ops:u}};case 8:if(!s.validate){t.next=17;break}return t.prev=9,t.next=12,e.validate(o.doc);case 12:t.next=17;break;case 14:throw t.prev=14,t.t1=t.catch(9),{message:"ValidationError: document validation failed after patch has been applied",meta:{errors:t.t1}};case 17:return t.abrupt("return",o);case 18:case"end":return t.stop()}},t,this,[[1,5],[9,14]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,u.default)(n.default.mark(function t(r,a,u,o){var s;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=[{op:"add",path:a,value:u}],t.next=3,e.patch(r,s,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,a,n){return t.apply(this,arguments)}}()}]),e}();t.default=p,e.exports=t.default},function(e,t){e.exports=require("koa-bodyparser")},function(e,t){e.exports=require("babel-runtime/helpers/toConsumableArray")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(1)),n=s(r(0)),u=(s(r(8)),s(r(7))),o=(s(r(2)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,r=(0,u.default)(e);return t=(0,n.default)(a.default.mark(function e(t,u){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(t,(0,n.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.state.hasBody=!0;case 1:case"end":return e.stop()}},e,void 0)})));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.throw(e.t0.statusCode||415,{details:e.t0.message,headers:{accept:o.stringify(o.types(t))}});case 8:return e.next=10,u();case 10:case"end":return e.stop()}},e,void 0,[[0,5]])})),function(e,r){return t.apply(this,arguments)}},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(1)),n=o(r(0)),u=o(r(6));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return e=(0,n.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.hasBody){e.next=3;break}return e.next=3,u.default.validate(t.request.body);case 3:return e.next=5,r();case 5:case"end":return e.stop()}},e,void 0)})),function(t,r){return e.apply(this,arguments)};var e},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(1)),n=i(r(0)),u=i(r(4)),o=(i(r(5)),i(r(2))),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return function(t){t.id,t.status;var r=t.expose,a=t.message,n=t.detail,o=t.stack,s=t.headers,i=t.meta,c={id:t.id,status:t.status};if((e||r)&&(0,u.default)(c,{title:a,detail:n}),e||s){(0,u.default)(i,{headers:s,stack:e?o:void 0});(0,u.default)(c,{meta:i})}return c}};t.default=function(){return e=(0,n.default)(a.default.mark(function e(t,r){var n,u,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.default)(t),s.types(t),e.prev=2,e.next=5,r();case 5:e.next=13;break;case 7:e.prev=7,e.t0=e.catch(2),u=(Array.isArray(e.t0)?e.t0:[e.t0]).map(c(n)),(i=u[0]).status?u.length>1?i.status>=500?t.status=500:i.status>=400&&(t.status=400):(t.status=i.status,"meta"in i&&"headers"in i.meta&&t.set(i.meta.headers)):t.throw(500,{detail:"Initial error has no status code. Assuming it is an implementation error.",meta:{initialError:i}}),t.body={errors:u};case 13:case"end":return e.stop()}},e,void 0,[[2,7]])})),function(t,r){return e.apply(this,arguments)};var e},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(1)),n=o(r(0)),u=(o(r(5)),o(r(2)));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return e=(0,n.default)(a.default.mark(function e(t,r){var n,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:e.next=12;break;case 5:e.prev=5,e.t0=e.catch(0),n=(0,u.default)(t),o=[],e.t0.status?o.push(e.t0):o.push({status:501,title:"Internal Server Error",detail:"JSON API implementation error"+(n?": "+e.t0.message:""),meta:{stack:n?e.t0.stack:void 0}}),t.status=o[0].status,t.body={errors:o};case 12:case"end":return e.stop()}},e,void 0,[[0,5]])})),function(t,r){return e.apply(this,arguments)};var e},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.message;e.params;return{detail:t,meta:{dataPath:e.dataPath}}},e.exports=t.default},function(e,t){e.exports=[{$id:"/",$async:!0,allOf:[{anyOf:[{required:["data"]},{required:["errors"]},{required:["meta"]}],errorMessage:"A document MUST contain at least one of the following top-level members: 'data', 'errors', 'meta'"},{not:{required:["errors","data"]},errorMessage:"The members data and errors MUST NOT coexist in the same document"},{not:{allOf:[{not:{required:["data"]}},{required:["included"]}]},errorMessage:"If a document does not contain a top-level 'data' key, the 'included' member MUST NOT be present either"},{type:"object",properties:{data:{$ref:"/data"},errors:{$ref:"/errors"},meta:{$ref:"/meta"},links:{$ref:"/links"},included:{$ref:"/included"},jsonapi:{type:"object"}},additionalProperties:!1,errorMessage:{type:"A JSON object MUST be at the root of every JSON API request and response containing data",additionalProperties:"Unless otherwise noted, objects defined by this specification MUST NOT contain any additional members"}}]},{$id:"/data",oneOf:[{$ref:"/resource"},{$ref:"/included"},{type:"null"}],errorMessage:"Primary data MUST be either a single resource object, or a single resource identifier object, or null, for requests that target single resources, or an array of resource objects, or an array of resource identifier objects, or an empty array for requests that target resource collections"},{$id:"/errors",type:"array",items:{$ref:"/error"},errorMessage:{type:"Error objects MUST be returned as an array keyed by errors in the top level of a JSON API document"}},{$id:"/links",type:"object",patternProperties:{"^.*":{$ref:"/link"}},additionalProperties:!1,errorMessage:{type:"The value of each 'links' member MUST be an object"}},{$id:"/included",type:"array",items:{$ref:"/resource"}},{$id:"/resource",type:"object",properties:{id:{type:"string",errorMessage:"The values of the 'id' member MUST be strings"},type:{type:"string",errorMessage:"The values of the 'type' member MUST be strings"},meta:{$ref:"/meta"},attributes:{type:"object"},relationships:{type:"array",items:{$ref:"/resource"}},links:{$ref:"/links"}},required:["id","type"],additionalProperties:!1,errorMessage:{required:"Every resource object MUST contain an 'id' member and a 'type' member"}},{$id:"/error",type:"object"},{$id:"/meta",type:"object"},{$id:"/link",oneOf:[{type:["string"]},{type:["object"],properties:{href:{type:"string",errorMessage:"Member 'href' should be a string containing the link’s URL."},meta:{$ref:"/meta"}},additionalProperties:!1}],errorMessage:"A 'link' MUST be represented either a string containing the link’s URL, or an object which can contain the 'href' and 'meta' members"}]},function(e,t){e.exports=require("ajv-errors")},function(e,t){e.exports=require("ajv")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemas=t.addSchema=t.validate=void 0;var a=o(r(16)),n=o(r(15)),u=o(r(14));function o(e){return e&&e.__esModule?e:{default:e}}var s=new a.default({schemas:u.default,verbose:!0,allErrors:!0,jsonPointers:!0});(0,n.default)(s,{});t.validate=function(e,t){return s.validate(e,t)},t.addSchema=function(e){return s.addShema(schema)},t.getSchemas=function(e){var t={};for(var r in s._schemas)t[r]=s._schemas[r].schema;return t}},function(e,t){e.exports=require("json8-patch")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/typeof")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(1)),n=i(r(4)),u=i(r(0)),o=i(r(6)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=(0,u.default)(a.default.mark(function t(r,u){var i;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.body={},i=s.types(r),r.jsonapi=new o.default((0,n.default)({},e,{body:r.body})),t.next=5,u();case 5:r.set("content-type",i[0]);case 6:case"end":return t.stop()}},t,void 0)})),function(e,r){return t.apply(this,arguments)};var t},e.exports=t.default},function(e,t){e.exports=require("koa-router")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var a=c(r(23)),n=c(r(22)),u=c(r(12)),o=c(r(11)),s=c(r(10)),i=c(r(9));function c(e){return e&&e.__esModule?e:{default:e}}t.Router=function(e){return new a.default(e).use((0,u.default)()).use((0,n.default)({validate:e.validate})).use((0,o.default)()).use((0,i.default)()).use((0,s.default)())}}]);
//# sourceMappingURL=index.js.map